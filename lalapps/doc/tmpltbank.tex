\section{Program \texttt{lalapps\_tmpltbank}}
\label{program:lalapps-tmpltbank}
\idx[Program]{lalapps\_tmpltbank}
\begin{entry}

\item[Name] 
\verb$lalapps_tmpltbank$ --- program to generate inspiral template banks.

\item[Synopsis]\noindent
\prog{lalapps\_tmpltbank} \newline \hspace*{0.5in}
[\option{--help}]\newline \hspace*{0.5in}   
[\option{--verbose}]\newline \hspace*{0.5in}                   
[\option{--version}]\newline \hspace*{0.5in}    
[\option{--debug-level}~\parm{level}]\newline \hspace*{0.5in}    
[\option{--user-tag}~\parm{usertag}]\newline \hspace*{0.5in}      
[\option{--comment}~\parm{comment}]\newline \hspace*{0.5in}  
\option{--gps-start-time}~\parm{gps\_start}\newline \hspace*{0.5in} 
\option{--gps-end-time}~\parm{gps\_end}\newline \hspace*{0.5in} 
[\option{--pad-data}~\parm{time\_pad}]\newline \hspace*{0.5in} 
[\option{--glob-frame-data}]\newline \hspace*{0.5in}  
[\option{--frame-type}~\parm{type}]\newline \hspace*{0.5in}           
[\option{--frame-cache}~\parm{cache\_file}]\newline \hspace*{0.5in}  
\option{--calibration-cache}~\parm{cal\_file}\newline \hspace*{0.5in}
\option{--glob-calibration-data}\newline \hspace*{0.5in}
\option{--channel-name}~\parm{channel}\newline \hspace*{0.5in}      
[\option{--calibrated-data}~\parm{cal\_type}]\newline \hspace*{0.5in}
[\option{--geo-high-pass-freq}~\parm{geo\_freq}]\newline \hspace*{0.5in}
[\option{--geo-high-pass-order}~\parm{geo\_order}]\newline \hspace*{0.5in}
[\option{--geo-high-pass-atten}~\parm{geo\_atten}]\newline \hspace*{0.5in}
\option{--sample-rate}~\parm{sample\_freq}\newline \hspace*{0.5in} 
\option{--resample-filter}~\parm{filter\_type}\newline \hspace*{0.5in} 
[\option{--disable-high-pass}]\newline \hspace*{0.5in} 
[\option{--enable-high-pass}~\parm{high\_freq}]\newline \hspace*{0.5in} 
[\option{--high-pass-order}~\parm{high\_order}]\newline \hspace*{0.5in}    
[\option{--high-pass-attenuation}~\parm{high\_atten}]\newline \hspace*{0.5in}   
\option{--spectrum-type}~\parm{spectype}\newline \hspace*{0.5in} 
[\option{--dynamic-range-exponent}~\parm{exp}]\newline \hspace*{0.5in} 
\option{--segment-length}~\parm{seglen}\newline \hspace*{0.5in} 
[\option{--number-of-segments}~\parm{segnum}]\newline \hspace*{0.5in}
[\option{--standard-candle}]\newline \hspace*{0.5in}   
[\option{--candle-snr}~\parm{candle\_snr}]\newline \hspace*{0.5in}  
[\option{--candle-mass1}~\parm{candle\_mass1}]\newline \hspace*{0.5in}
[\option{--candle-mass2}~\parm{candle\_mass2}]\newline \hspace*{0.5in}
\option{--low-frequency-cutoff}~\parm{cutlow}\newline \hspace*{0.5in}
\option{--high-frequency-cutoff}~\parm{cuthigh}\newline \hspace*{0.5in} 
[\option{--minimum-mass}~\parm{minmass}]\newline \hspace*{0.5in}
[\option{--maximum-mass}~\parm{maxmass}]\newline \hspace*{0.5in}
[\option{--minimum-psi0}~\parm{psi0min}]\newline \hspace*{0.5in}
[\option{--maximum-psi0}~\parm{psi0max}]\newline \hspace*{0.5in}
[\option{--minimum-psi3}~\parm{psi3min}]\newline \hspace*{0.5in}
[\option{--maximum-psi3}~\parm{psi3max}]\newline \hspace*{0.5in}
[\option{--maximum-fcut-tmplts}~\parm{maxTemp}]\newline \hspace*{0.5in}
[\option{--alpha}~\parm{alpha}]\newline \hspace*{0.5in}
\option{--minimal-match}~\parm{match}\newline \hspace*{0.5in} 
\option{--order}~\parm{order}\newline \hspace*{0.5in}  
\option{--approximant}~\parm{approx}\newline \hspace*{0.5in}
\option{--space}~\parm{space}\newline \hspace*{0.5in} 
[\option{--write-raw-data}]\newline \hspace*{0.5in}   
[\option{--write-response}]\newline \hspace*{0.5in}   
[\option{--write-spectrum}]\newline \hspace*{0.5in}   
[\option{--write-strain-spectrum}]\newline \hspace*{0.5in}   




\item[Options]
\noindent The following command line arguments are available when running tmpltbank.c
\\



\item[\option{--alpha} \parm{ alpha}] 
Set BCV amplitude correction to \parm{alpha}.

\item[\option{--approximant} \parm{ approx}] 
Sets the approximant of the waveform to \parm{approx}. \option{TaylorT2} is the standard stationary phase frequency domain chirp used in the BNS search. Available parameters: \option{TaylorT1}, \option{TaylorT2}, \option{TaylorT3}, \option{TaylorF1}, \option{TaylorF2}, \option{PadeT1}, \option{PadeF1}, \option{EOB}, \option{BCV}, \option{SpinTaylorT3}, \option{BCVSpin}.


\item[\option{--calibrated-data} \parm{type}] 
Calibrated data of \parm{type} \option{real\_4} or \option{real\_8}.

\item[\option{--calibration-cache} \parm{cal\_file}] 
Obtain calibration from LAL frame cache \parm{cal\_file}.

\item[\option{--candle-mass1} \parm{candle\_mass1}] 
Mass  \parm{candle\_mass1} of first component in candle binary.  Must be specified is the option \option{--standard-candle} is set.

\item[\option{--candle-mass2} \parm{candle\_mass2}] 
Mass \parm{candle\_mass2} of second component in candle binary. Must be specified is the option \option{--standard-candle} is set.

\item[\option{--candle-snr} \parm{candle\_snr}] 
Set the signal-to-noise ratio of standard candle to \parm{candle\_snr}. Must be specified is the option \option{--standard-candle} is set.

\item[\option{--channel-name} \parm{channel}] 
Read data from interferometer channel \parm{channel}.

\item[\option{--comment} \parm{comment}] 
Set the process table comment to \parm{comment}.

\item[\option{--debug-level} \parm{level}] 
Sets the LAL debug level to \parm{level}.  
1 and 33 are the commonest choices for this code.  Debug level 1 is used for 
developing code because it enables memory and error checking.  Since memory 
checking is slow the correct choice for production code is 33.  
See the LAL documentation for more information.  

\item[\option{--disable-high-pass}] 
Turn off the IIR highpass filter.  This is an optimistc option. Someday the data will be so good we won't need high pass filtering!  

\item[\option{--dynamic-range-exponent} \parm{exp}] 
Set dynamic range scaling to ${2}^{exp}$.

\item[\option{--enable-high-pass} \parm{high\_freq}] 
High pass data above \parm{high\_freq} Hz using an IIR filter.

\item[\option{--frame-cache} \parm{cache\_file}] 
This option is used instead of \option{--glob-frame-data} to read frame data from a frame cache file \parm{cache\_file}. 

\item[\option{--frame-type} \parm{type}] 
This option specified the type of frames containing the input data. This option must be specified with the \option{--glob-frame-data} option.???????????

\item[\option{--geo-high-pass-atten} \parm{geo\_atten}] 
Set the attenuation of the high pass filter to \parm{geo\_atten}. Only if \option{--calibrated-data} is set to \option{real\_8}.

\item[\option{--geo-high-pass-freq} \parm{geo\_freq}] 
This sets the high pass filter frequency for GEO data above \parm{geo\_freq} Hz using an IIR filter. Only if \option{--calibrated-data} is set to \option{real\_8}.

\item[\option{--geo-high-pass-order} \parm{geo\_order}] 
Set the order of the GEO high pass filter to \parm{geo\_order}. Only if \option{--calibrated-data} is set to \option{real\_8}.

\item[\option{--glob-calibration-data}] 
Is this option is specified, the calibration is obtained by globbing in the working directory.?????????

\item[\option{--glob-frame-data}] 
This option along with \option{--frame-type}
can be used instead of \option{--frame-cache} to read data stored locally in 
the working directory.  It finds files of the specified frame type with a *.gwf 
extension. 

\item[\option{--gps-end-time} \parm{gps\_end}] 
Set the integer part of the GPS time \parm{gps\_end} you want
to stop reading data. 

\item[\option{--gps-start-time} \parm{gps\_start}] 
Set the integer part of the GPS time \parm{gps\_start} from which you wish to begin reading data.

\item[\texttt{--help}] display the help message which gives brief explanations
of the command arguments.  

\item[\option{--high-frequency-cutoff} \parm{cuthigh}] 
Do not filter above \parm{cuthigh} Hz.

\item[\option{--high-pass-attenuation} \parm{high\_atten}] 
Set the attenuation of the high pass filter to \parm{high\_atten}.

\item[\option{--high-pass-order} \parm{high\_order}] 
Set the order of the high pass filter to \parm{high\_order}.

\item[\option{--low-frequency-cutoff} \parm{cutlow}] 
Do not filter below \parm{cutlow} Hz.

\item[\option{-maximum-fcut-tmplts} \parm{ maxTemp}] 
Set the maximum number of templates in fcut direction to \parm{maxTemp}.

\item[\option{--maximum-mass} \parm{maxmass}] 
Set maximum component mass of bank to \parm{maxmass}.

\item[\option{--maximum-psi0} \parm{psi0max}] 
Set maximum range of BCV parameter psi0 to \parm{ psi0max}.

\item[\option{--maximum-psi3} \parm{psi3max}] 
Set maximum range of BCV parameter psi3 to  \parm{ psi3max}.

\item[\option{--minimal-match} \parm{match}] 
Specifies the minimal match \parm{match} between templates in the 
bank and all possible signals in the parameter space.

\item[\option{--minimum-mass} \parm{minmass}] 
Set minimum component mass of bank to \parm{minmass}.

\item[\option{--minimum-psi0} \parm{psi0min}] 
Set minimum range of BCV parameter psi0 to \parm{ psi0min}.

\item[\option{--minimum-psi3} \parm{psi3min}] 
Set minimum range of BCV parameter psi3 to \parm{ psi3min}.

\item[\option{--number-of-segments} \parm{segnum}] 
Set number of data segments to \parm{segnum}.

\item[\option{--order} \parm{order}] 
This sets the order of the waveform to \parm{order}. Usually it is set to \option{twoPN} (second order post newtonian). Available parameters: \option{newtonian}, \option{oneHalfPN}, \option{onePN}, \option{onePointFivePN}, \option{twoPN}, \option{twoPointFivePN}, \option{threePN}, \option{threePointFivePN}.

\item[\option{--pad-data} \parm{time\_pad}] 
This flag specifies an amount of time \parm{time\_pad} to add to 
the beginning and end of the input time series data.  Padding the data is 
necessary because resampling and filtering corrupts these portions. 
8 seconds is the accepted choice for this paramenter.  See LAL documentation 
for a description of resampling and high pass filtering.  

\item[\option{--resample-filter} \parm{filter\_type}] 
Set resample filter \parm{filter\_type} to \option{ldas} or \option{butterworth}. In the normal case the \parm{ldas} filter is used.

\item[\option{--sample-rate} \parm{sample\_freq}] 
Specifies the sampling frequency \parm{sample\_freq} at which you
want to filter the data downsampling if necessary.

\item[\option{--segment-length} \parm{seglen}] 
Set data segment length to \parm{seglen} points.

\item[\option{--space} \parm{ space}] 
In order to make the template bank coordinates nice and friendly these parameters are used instead of masses.
Usually {\tt Tau0Tau3} is used. Available parameters:
\option{Tau0Tau2}, \option{Tau0Tau3}, \option{Psi0Psi3}.

\item[\option{--spectrum-type} \parm{spec\_type}] 
Use PSD estimator \parm{spec\_type} \option{mean} or \option{median} to choose how the average is calculated. Since the median average is less affected by a loud glitch \option{median} is used generally.

\item[\option{--standard-candle}] 
Compute a standard candle from the PSD. In that case the arguments \option{candle-mass1}, \option{candle-mass2} and  \option{candle-snr} must also be specified.

\item[\option{--verbose}] print progress information as the code executes.

\item[\option{--version}] print version information and exit without running 
the tmpltbank code. 

\item[\option{--user-tag} \parm{usertag}] 
Set the user tag to the string \parm{usertag}.  
This string must not contain spaces or dashes (``-'').  This string will appear 
in the name of the file to which output information is written, and is recorded 
in the various XML tables within the file.

\item[\option{--write-raw-data}] 
Write raw data to a frame file.

\item[\option{--write-response}] 
Write the computed response function to a frame.

\item[\option{--write-spectrum}] 
Write the uncalibrated psd to a frame.

\item[\option{--write-strain-spectrum}] 
Write the calibrated strain psd to a text file.

 


\item[Description]
\noindent \verb$lalapps_tmpltbank$ is a stand alone code for generating inspiral
template banks for LIGO or GEO data with the LAL bank package.  The code 
generates a calibrated power spectrum at the specified time for the 
requested channel and uses this to compute the template bank.  
The number of templates and the
values of the bank parameters in the bank also depend on the minimal
match, the
minimum and maximum values of mass1 and mass2 (for the BNS search) or the
minimum and maximum values of psi0, psi3, the bank-alpha and the number of
fcut values (for the BCV search), which are all command-line arguments.
Other necessary pieces of information are the approximant and its order and
the space that the template bank will be laid on. The output of the code is
an xml file and the bank is contained in a \verb$sngl_inspiral$ table. The code has
also the capability of outputing the raw data, the response function and the
calibrated and unclibrated power spectra to frame files.
See the LAL bank package
documentation for detailed information on the algorithms used to generate the
template banks.

\item[Example]

\begin{verbatim}
lalapps_tmpltbank \
--gps-start-time 734357353 --gps-end-time 734358377 \
--frame-cache cache/L-734357345-734361107.cache \
--segment-length 1048576 --number-of-segments 7 \
--pad-data 7 --sample-rate 4096 --resample-filter ldas \
--enable-high-pass 5.000000e+01 --spectrum-type median
--low-frequency-cutoff 7.000000e+01 --high-frequency-cutoff 2.048000e+03 \
--minimum-mass 1.000000e+00  --maximum-mass 3.000000e+00 \
--minimal-match 9.700000e-01 --calibration-cache  \
/ldas_outgoing/calibration/cache_files/L1-CAL-V03-729273600-734367600.cache \
--space Tau0Tau3 --approximant TaylorT1 --order twoPN \
--channel-name L1:LSC-AS_Q --debug-level 33

\end{verbatim}

\item[Author]
\noindent Duncan Brown and Alexander Dietz
\end{entry}
